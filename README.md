# μ§μ› κ΄€λ¦¬ μ‹μ¤ν… (.NET 8 + CQRS)

κ³Όμ  μ§„ν–‰μ© .NET 8 λ° CQRS ν¨ν„΄ μμ‹ κµ¬ν„μ…λ‹λ‹¤.

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

- `src/Api`: Minimal API μ—”λ“ν¬μΈνΈ λ° μ”μ²­ λ¶„μ„(`PayloadResolver`)
- `src/Application`: Command/Query ν•Έλ“¤λ¬, μ ν¨μ„± κ²€μ¦, μ„λΉ„μ¤ μΈν„°νμ΄μ¤
- `src/Domain`: ν•µμ‹¬ λ„λ©”μΈ λ¨λΈ (`Employee`)
- `src/Infrastructure`: SQLite DB μ—°λ™, Repository κµ¬ν„, CSV/JSON νμ„, λ΅κΉ…
- `tests/Unit`: ν•µμ‹¬ λ΅μ§ λ° μ ν¨μ„± κ²€μ¦ λ‹¨μ„ ν…μ¤νΈ
- `tests/Integration`: API μ—”λ“ν¬μΈνΈ ν†µν•© ν…μ¤νΈ
- `TASK_STATUS.md`: μƒμ„Έ μ§„ν–‰ μƒνƒ μ²΄ν¬λ¦¬μ¤νΈ

## οΏ½ μ‹¤ν–‰ λ°©λ²• (.NET 8 SDK ν•„μ”)

```bash
# μμ΅΄μ„± λ³µκµ¬ λ° μ‹¤ν–‰
dotnet restore
dotnet run --project src/Api/Api.csproj
```

- **Swagger UI**: `http://localhost:5000/swagger` (ν¬νΈλ” ν™κ²½μ— λ”°λΌ λ‹¤λ¥Ό μ μμµλ‹λ‹¤)

## π’Ύ λ°μ΄ν„° μ €μ¥ (Persistence)

- **SQLite**λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. (`Data Source=employees.db`)
- μ•± μ‹μ‘ μ‹ μλ™μΌλ΅ DB νμΌκ³Ό ν…μ΄λΈ”μ„ μƒμ„±ν•λ―€λ΅λ³„λ„μ μ„¤μΉλ‚ λ§μ΄κ·Έλ μ΄μ…μ΄ ν•„μ” μ—†μµλ‹λ‹¤.

## π“ μƒν” λ°μ΄ν„°

`samples/` ν΄λ”μ— ν…μ¤νΈμ© λ°μ΄ν„°λ¥Ό ν¬ν•¨ν–μµλ‹λ‹¤. Swaggerλ‚ curlλ΅ μ—…λ΅λ“ ν…μ¤νΈ μ‹ ν™μ©ν•μ„Έμ”.
- `samples/employees.csv` β€” CSV ν•μ‹ μƒν”
- `samples/employees.json` β€” JSON ν•μ‹ μƒν”

## π§ ν…μ¤νΈ

```bash
dotnet test task_20260212.sln
```

- **Unit**: νμ„ λ° μ»¤λ§¨λ“/μΏΌλ¦¬ μ ν¨μ„± κ²€μ¦
- **Integration**: μ‹¤μ  HTTP μ”μ²­ κΈ°λ° μ—”λ“ν¬μΈνΈ λ™μ‘ κ²€μ¦
  - (JSON/CSV λ“±λ΅, Multipart μ „μ†΅, κ°μΆ… μ—λ¬ μΌ€μ΄μ¤ ν¬ν•¨)
- **CI**: GitHub Actionsλ¥Ό ν†µν•΄ Push/PR μ‹λ§λ‹¤ μλ™ ν…μ¤νΈ μ‹¤ν–‰

## π”— API λ…μ„Έ

1. **μ§μ› λ©λ΅ μ΅°ν (νμ΄μ§•)**
   - `GET /api/employee?page={page}&pageSize={pageSize}`
2. **μ΄λ¦„μΌλ΅ μ§μ› μ΅°ν**
   - `GET /api/employee/{name}`
3. **μ§μ› μ¶”κ°€**
   - `POST /api/employee`
   - **λ‹¤μ–‘ν• μ…λ ¥ μ§€μ›**:
     - `multipart/form-data` νμΌ μ—…λ΅λ“ (.csv, .json)
     - Request Bodyμ— CSV/JSON ν…μ¤νΈ μ§μ ‘ μ „λ‹¬
     - Form Field (`csv`, `json`, `data`)λ΅ ν…μ¤νΈ μ „λ‹¬

## π’΅ κµ¬ν„ ν¬μΈνΈ λ° νΉμ΄μ‚¬ν•­

### 1. μ§€λ¥ν• μ”μ²­ μ²λ¦¬
- μ”μ²­ λ°”λ””μ λ‚΄μ©μ„ **ν•νƒ(Shape)** λ° **Content-Type** κΈ°λ°μΌλ΅ μλ™ λ¶„λ¥ν•©λ‹λ‹¤.
- μλ»λ ν•μ‹λ„ μ¬λ°”λ¥Έ μ—λ¬ λ©”μ‹μ§€λ¥Ό λ°ν™ν•λ„λ΅ μ²λ¦¬ν–μµλ‹λ‹¤.

### 2. λ°μ΄ν„° λ¬΄κ²°μ„± λ° νμ‹±
- **μ¤‘λ³µ λ°©μ§€**: λ“±λ΅ μ‹ μ΄λ©”μΌκ³Ό μ „ν™”λ²νΈμ μ¤‘λ³µμ„ μ²΄ν¬ν•μ—¬ λ°μ΄ν„° ν’μ§μ„ μ μ§€ν•©λ‹λ‹¤.
- **CSV μ μ—°μ„±**: UTF-8 BOM λ° ν—¤λ” λΌμΈμ„ ν—μ©ν•μ—¬ λ‹¤μ–‘ν• ν™κ²½μ νμΌμ„ μμ©ν•©λ‹λ‹¤.
- **JSON μ μ—°μ„±**: λ‹¨μΌ κ°μ²΄μ™€ λ°°μ—΄ ν•νƒλ¥Ό λ¨λ‘ μ§€μ›ν•©λ‹λ‹¤.

### 3. κµ¬μ΅°μ  λ΅κΉ… (Serilog)
- **μ½μ†”**: μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§ λ΅κ·Έ
- **νμΌ**: `Error` λ΅κ·Έλ” λ‚ μ§λ³„λ΅ λ³„λ„ κΈ°λ΅ (`task_20260212_logs/error-yyyyMMdd.log`)
- ν•Έλ“¤λ¬ λ λ²¨μ—μ„ ν•µμ‹¬ λΉ„μ¦λ‹μ¤ νλ¦„μ„ μ¶”μ ν•©λ‹λ‹¤.

---
*μμ„Έν• μ‘μ—… λ‚΄μ—­μ€ [TASK_STATUS.md](file:///e:/Project/task_2026-02-14/task_20260212/TASK_STATUS.md)λ¥Ό μ°Έκ³ ν•΄ μ£Όμ„Έμ”.*
